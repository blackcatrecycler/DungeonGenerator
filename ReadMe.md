
# 地牢生成

作者:<font color=gray>Blacat Recycler</font>

- [地牢生成](#地牢生成)
  - [项目简介](#项目简介)
  - [项目思想](#项目思想)
  - [目录结构](#目录结构)
    - [一、总体结构](#一、总体结构)
    - [二、类介绍](#二、类介绍)
  - [更新信息](#更新信息)

## 项目简介

本项目为地牢生成器，由C#语言编写，该算法由[Bob Nystrom](http://journal.stuffwithstuff.com/2014/12/21/rooms-and-mazes/)启发，并作为我的毕业课设的基础组件

该项目的Unity3d解决方案[点击这里](https://github.com/blackcatrecycler/DungeonGenerator-Unity)

## 项目思想

在生成地牢的时候，我们可以遵循以下原则
* 一个空的巨大空间
* 先随机摆放房间
* 在没有房间的空间内生成迷宫
* 随机置一个房间为主房间，利用洪水算法进行通路遍历并打通可行的房间。
* 消去多余的一些路，地牢完成

## 目录结构

### 一、总体结构


|文件名|作用|
|:--|:--|
|Gmap.cs|主要文件，包括地图生成算法及地图组件|
|RandomTool.cs|辅助文件，工具类，用于随机数和随机操作的生成|
|MapPrint.cs|辅助文件，控制台输出类|
|ConstNum.cs|常数存放|
|Program.cs|控制台主程序，用于调试|

### 二、类介绍

|类名|作用|
|:--|:----|
|Gmap|地图生成类|
|Block|地图块，存储地图块与周围块之间的连接状态|
|Rooms|地图生成基类，最初为矩形房间|
|RabdomTool|工具类，随机生成功能|
|RandomTool\<T\>|工具类，带模版的生成功能|
|MapPrint|工具类 初版为控制台输出|

## 更新信息

- 2018.4.9 添加了该算法的Unity3d方案，最近要制作一个Java web项目暂时搁置
- 2018.4.7 完善猎杀算法,但仍然出现大面积
- 2018.4.6 增加了道路，使用猎杀算法,此时为房间和迷宫互相独立